<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="cabecalho">
      <div id="svgs">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="65"
          height="65"
          viewBox="0 0 24 24"
          fill="none"
          aria-hidden="true"
        >
          <circle
            cx="11"
            cy="11"
            r="6"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
            fill="none"
          />
          <line
            x1="20.5"
            y1="20.5"
            x2="15.8"
            y2="15.8"
            stroke="white"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <a href="index.html"
          ><img src="../images/image.png" alt="" width="120" id="palcolivre"
        /></a>
        <div>
          <a href="login.html"
            ><img src="../images/profile-svgrepo-com (1).svg" alt="" width="50"
          /></a>
          <a href="Carrinho.html"
            ><img
              src="../images/shop-cart-svgrepo-com (2).svg"
              alt=""
              width="50"
          /></a>
        </div>
      </div>
    </header>

    <div id="dpscabe">
      <div><p>Cordas</p></div>
      <div><p>Sopro</p></div>
      <div><p>Elétricos</p></div>
      <div><p>Acessórios</p></div>
      <div><p>Teclas</p></div>
      <div><p>Percussão</p></div>
    </div>

    <main>
      <div id="instrumentos-container" class="instrumentos-container">
        <!-- Os instrumentos serão carregados via JS -->
      </div>
    </main>

    <footer>
      <div class="center">
        <div class="redes">
          <p>Redes Sociais</p>
          <button class="Sociais">Instagram</button>
          <button class="Sociais">Tiktok</button>
          <button class="Sociais">Facebook</button>
          <button class="Sociais">Youtube</button>
          <button class="Sociais">Twitter</button>
        </div>
        <div class="modelos">
          <p>Modelos</p>
          <button class="Sociais">Instrumentos Básicos</button>
          <button class="Sociais">Instrumentos Intermediários</button>
          <button class="Sociais">Instrumentos Avançados</button>
        </div>
        <div class="ajuda">
          <p>Precisa de Ajuda?</p>
          <p>Entre em Contato!</p>
          <button class="Sociais">E-mail</button>
          <button class="Sociais">Telefone</button>
        </div>
      </div>
    </footer>

    <script type="module">
      import { adicionarAoCarrinho } from "./carrinho.js";

      const token = localStorage.getItem("token");
      const container = document.getElementById("instrumentos-container");

      // Exemplo de produtos (você pode buscar do backend depois)
      const instrumentos = [
        {
          id: 1,
          nome: "Saxofone Tenor",
          preco: 7870,
          imagem: "../images/download.jpg",
        },
      ];

      function renderInstrumentos() {
        container.innerHTML = "";
        instrumentos.forEach((item) => {
          const div = document.createElement("div");
          div.classList.add("instrumento");
          div.innerHTML = `
          <img src="${item.imagem}" alt="${item.nome}" width="150" />
          <p><strong>${item.nome}</strong></p>
          <p>Preço: R$ ${item.preco}</p>
          <button class="btn-adicionar" data-id="${item.id}">Adicionar ao Carrinho</button>
        `;
          container.appendChild(div);
        });

        // Eventos dos botões
        container.querySelectorAll(".btn-adicionar").forEach((btn) => {
          btn.addEventListener("click", async () => {
            const instrumentoId = btn.dataset.id;
            try {
              await adicionarAoCarrinho(token, instrumentoId, 1);
              alert("Item adicionado ao carrinho!");
            } catch (err) {
              alert("Erro ao adicionar ao carrinho: " + err.message);
            }
          });
        });
      }

      document.addEventListener("DOMContentLoaded", renderInstrumentos);
    </script>
  </body>
</html>
